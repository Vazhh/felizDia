import React, { useEffect, useState, useRef } from "react";
import alrevez from "/alrevez.png";

const Letter = () => {
//   const [content, setContent] = useState("");
//   const scrollRef = useRef(null);
//   const letterText = `
//     A  quien corresponda, pero sobre todo, a quien me inspira: ✍️💌

// Hoy me encuentro escribiendo no solo desde la razón, sino desde la mezcla confusa y sincera de mis pensamientos y emociones 🧠❤️, desde un rincón del alma donde la lógica se disuelve entre sentimientos 🌫️. Quisiera presentar esta especie de queja formal, no contra una persona ni contra una situación voluntaria, sino contra la distancia… esa presencia ausente que separa los cuerpos 🛤️, aunque no consiga apagar lo que sentimos ni lo que podemos vivir juntos 🔥✨.

// Y es que, cuando más deseo estar contigo, más frustrante se vuelve el sentir de tu ausencia 😔. No poder compartir los silencios, las miradas 👀, y hasta lo cotidiano. La distancia pesa, agobia, y a veces hace que lo simple se vuelva complicado ⛅. Pero incluso con ese peso, con ese dolor, me siento profundamente agradecido por haberte encontrado 🌍💫, porque me hayas encontrado, por haber coincidido contigo en este tiempo, en este mundo, en esta vida. Porque, aunque no estés cerca físicamente, estás presente en mis pensamientos de una manera que nadie más ha logrado 🧘‍♂️💭. Porque estás dentro de mí, más presente que cualquier otra cosa 🫀.

// Y aunque el tiempo que hemos compartido ha sido corto, ha tenido una fuerza innegable ⚡, casi como si hubiéramos vivido una vida entera en unos cuantos momentos ⏳; como si el alma, al reconocerte, hubiese hecho eterno cada instante 🌌. Para mí ha sido intenso, real, profundo… aunque quizás para ti el tiempo haya parecido efímero, fugaz 🍂. Y ahí nace un temor: el miedo a que ese cambio inevitable —el que llega sin aviso— se adelante a su hora ⏰; que nuestras miradas ya no se reconozcan igual, que la noche ya no se sienta incompleta sin ti 🌙, que la costumbre gane donde antes habitaba la magia ✨.

// A veces me cuestiono más de lo habitual 🤔. Y si me pongo a pensar, he vivido relaciones antes, claro, y no reniego de lo que fue. Vivía el momento sin pensar demasiado en el mañana 🕊️. Compartí momentos sinceros, pero sin la certeza de querer algo más allá del presente. ¿Fueron un pasado importante para mí? Sí. Y como siempre he intentado, compartía la vida con la intención de vivirla junto a quien tenía a mi lado. Pero, siendo honesto, nunca me visualicé con esa persona en un futuro sólido, real, con raíces profundas 🌱. No porque no lo deseara entonces, sino porque hoy me descubro pensando en ti con un deseo tan fuerte de futuro, tan lleno de anhelos y raíces 🌳, que me sorprende. Me doy cuenta de que nunca antes había deseado tanto que todo salga bien 🌈, no por inercia, sino porque todo en mí late hacia ti 💓, y en el anhelo de cada fibra de mi ser.

// Hoy, contigo, todo es distinto. Contigo sí me visualizo 🏡, sí quiero un futuro compartido. Mis esfuerzos, mis ganas, mi perseverancia y hasta mis miedos tienen una dirección clara: tú 🧭. No son dudas lo que me retiene, son esperanzas lo que me empuja 🚀. Y en ese empuje me descubro queriendo ser mejor, más paciente, más fuerte, más consciente… para que el destino, si puedo forjarlo, me lleve a ti 🛤️❤️.

// Y si hay algo que tengo claro, es que no me da miedo enfrentar los problemas 💪. Porque no se trata de evitarlos, sino de superarlos contigo 🤝. Quiero crecer a tu lado, ver cómo tus sueños y tus metas se cumplen 🌠, apoyarte en cada batalla ⚔️, y entre el vaivén de la dicha y la tristeza, ser tu constante apoyo, tu refugio en las tormentas 🌧️🫂. Ser tu hogar, incluso cuando todo afuera parezca incierto 🏠.

// Pero en medio de esta espera, hay días en que la melancolía me abraza 🖤. Tu ausencia, a veces, me muerde el corazón con una fuerza brutal 💔. Me descubro contemplando tus fotos como si fueran ventanas a un mundo que aún no puedo tocar 📸🪟. Y en esas imágenes, te vuelvo a sentir cerca… como si tu voz pudiera acariciarme desde el eco del recuerdo 🔊👂.

// Hay momentos en los que el alma se quiebra un poco más 🫥, cuando el silencio se vuelve más largo que de costumbre 🌑. Y me pregunto cómo se le explica al destino que no estás aquí… cómo se convence al corazón de que no puede tenerte cuando más te necesita, cuando más arde por ti 💢. Porque lo que despiertas en mí no se puede contener. Es deseo, es ternura, es locura, es amor… todo al mismo tiempo 💘🫶🔥.

// Pero aquí estoy, dándome la oportunidad de dar lo mejor, con paciencia, con la certeza de que vale la pena ⏳💖. Porque mi destino —si tengo el privilegio de elegirlo— es estar contigo 🛤️👫. Porque quiero que seas mi vida, no solo una parte bonita del camino 🚶‍♂️🪷.

// Y ahora, solo me queda agradecer… de forma rotunda, sincera, sin medida 🙏.

// Gracias por cada segundo compartido, porque en medio de esta distancia, cada amanecer comienza contigo en mi mente 🌅, y cada noche termina extrañándote 🌌. Gracias porque, aunque aún no podamos vivirlo del todo, deseo compartir mi día a día contigo 📆. Con la esperanza de que esta compañía que nos une se vuelva algo tangible, inquebrantable, imperdible 🔗.

// Gracias por encontrarme, por entrar en mi vida, por tocarla de la forma en que solo tú lo has hecho 💫. Y lo reitero con todo mi corazón: mi deseo es vivir una vida contigo 🧡. No un momento, no una historia pasajera… sino una vida entera, contigo a mi lado 🥂💍.

// Y por sobre todo, te agradezco por permitirme estar a tu lado en esta primera etapa, por cada instante compartido 🕰️. Por tus sonrisas tímidas que me iluminan 😊✨, por tu dulzura que desarma 🍯, por tus miradas que me calman y me incendian a la vez 🔥🧊. Gracias por tu esencia, por tu ternura, por tu fuerza 💐. Gracias por permitirme habitar tu mundo, aunque sea a la distancia, incluso sin promesas, incluso con miedos 🌌🎈.

// Deseo con todo lo que soy que me sigas permitiendo estar en tu vida... día tras día, noche tras noche 🌞🌙... y si la vida me da —o nos da— la oportunidad, ojalá también en la próxima 🌠. Porque si existe algo más allá de este tiempo, de esta piel, de esta historia… si el amor tiene algo de eterno, estoy seguro de que volvería a encontrarte ♾️💖.

// Te quiero. Más de lo que estas palabras alcanzan a decir 🫀.
// Y por sobre todo, te elijo y te seguiré eligiendo 💍🌹.

// Con cariño, con verdad y con esperanza. 🌷
//     `;

//   useEffect(() => {
//     let i = 0;
//     const interval = setInterval(() => {
//       setContent((prev) => prev + letterText[i]);
//       i++;
//       if (i === letterText.length) clearInterval(interval);
//     }, 70);
//     return () => clearInterval(interval);
//   }, []);

//   useEffect(() => {
//     if (scrollRef.current) {
//       scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
//     }
//   }, [content]);

//   return (
//     <div className="min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-pink-200 via-purple-100 to-pink-300 bg-[length:400%_400%] animate-gradient-x p-4">
//       {/* Música de fondo */}
//       <audio autoPlay loop>
//         <source src="/De-mi-para-ti.mp3" type="audio/mp3" />
//       </audio>

//       {/* Carta */}
//       <div
//         ref={scrollRef}
//         className="bg-white bg-opacity-80 rounded-3xl shadow-xl p-8 w-full max-w-2xl font-romantic text-2xl text-rose-700 leading-relaxed border border-rose-300 backdrop-blur-md h-[80vh] overflow-auto scrollbar-none"
//       >
//         {content}
//         <span className="animate-pulse text-rose-400">|</span>
//       </div>
//       {/* <div className="bg-white bg-opacity-80 rounded-3xl shadow-xl p-8 max-w-2xl font-bold text-2xl text-rose-700 whitespace-pre-line leading-relaxed border border-rose-300 backdrop-blur-md">
//         {content}
//         <span className="animate-pulse text-rose-400">|</span>
//       </div> */}
//     </div>
//   );
// };


const [iniciado, setIniciado] = useState(false);
  const [contenido, setContenido] = useState('');
  const scrollRef = useRef(null);
  const audioRef = useRef(null);

  const textoCarta = `
   A  quien corresponda, pero sobre todo, a quien me inspira: ✍️💌

Hoy me encuentro escribiendo no solo desde la razón, sino desde la mezcla confusa y sincera de mis pensamientos y emociones 🧠❤️, desde un rincón del alma donde la lógica se disuelve entre sentimientos 🌫️. Quisiera presentar esta especie de queja formal, no contra una persona ni contra una situación voluntaria, sino contra la distancia… esa presencia ausente que separa los cuerpos 🛤️, aunque no consiga apagar lo que sentimos ni lo que podemos vivir juntos 🔥✨.

Y es que, cuando más deseo estar contigo, más frustrante se vuelve el sentir de tu ausencia 😔. No poder compartir los silencios, las miradas 👀, y hasta lo cotidiano. La distancia pesa, agobia, y a veces hace que lo simple se vuelva complicado ⛅. Pero incluso con ese peso, con ese dolor, me siento profundamente agradecido por haberte encontrado 🌍💫, porque me hayas encontrado, por haber coincidido contigo en este tiempo, en este mundo, en esta vida. Porque, aunque no estés cerca físicamente, estás presente en mis pensamientos de una manera que nadie más ha logrado 🧘‍♂️💭. Porque estás dentro de mí, más presente que cualquier otra cosa 🫀.

Y aunque el tiempo que hemos compartido ha sido corto, ha tenido una fuerza innegable ⚡, casi como si hubiéramos vivido una vida entera en unos cuantos momentos ⏳; como si el alma, al reconocerte, hubiese hecho eterno cada instante 🌌. Para mí ha sido intenso, real, profundo… aunque quizás para ti el tiempo haya parecido efímero, fugaz 🍂. Y ahí nace un temor: el miedo a que ese cambio inevitable —el que llega sin aviso— se adelante a su hora ⏰; que nuestras miradas ya no se reconozcan igual, que la noche ya no se sienta incompleta sin ti 🌙, que la costumbre gane donde antes habitaba la magia ✨.

A veces me cuestiono más de lo habitual 🤔. Y si me pongo a pensar, he vivido relaciones antes, claro, y no reniego de lo que fue. Vivía el momento sin pensar demasiado en el mañana 🕊️. Compartí momentos sinceros, pero sin la certeza de querer algo más allá del presente. ¿Fueron un pasado importante para mí? Sí. Y como siempre he intentado, compartía la vida con la intención de vivirla junto a quien tenía a mi lado. Pero, siendo honesto, nunca me visualicé con esa persona en un futuro sólido, real, con raíces profundas 🌱. No porque no lo deseara entonces, sino porque hoy me descubro pensando en ti con un deseo tan fuerte de futuro, tan lleno de anhelos y raíces 🌳, que me sorprende. Me doy cuenta de que nunca antes había deseado tanto que todo salga bien 🌈, no por inercia, sino porque todo en mí late hacia ti 💓, y en el anhelo de cada fibra de mi ser.

Hoy, contigo, todo es distinto. Contigo sí me visualizo 🏡, sí quiero un futuro compartido. Mis esfuerzos, mis ganas, mi perseverancia y hasta mis miedos tienen una dirección clara: tú 🧭. No son dudas lo que me retiene, son esperanzas lo que me empuja 🚀. Y en ese empuje me descubro queriendo ser mejor, más paciente, más fuerte, más consciente… para que el destino, si puedo forjarlo, me lleve a ti 🛤️❤️.

Y si hay algo que tengo claro, es que no me da miedo enfrentar los problemas 💪. Porque no se trata de evitarlos, sino de superarlos contigo 🤝. Quiero crecer a tu lado, ver cómo tus sueños y tus metas se cumplen 🌠, apoyarte en cada batalla ⚔️, y entre el vaivén de la dicha y la tristeza, ser tu constante apoyo, tu refugio en las tormentas 🌧️🫂. Ser tu hogar, incluso cuando todo afuera parezca incierto 🏠.

Pero en medio de esta espera, hay días en que la melancolía me abraza 🖤. Tu ausencia, a veces, me muerde el corazón con una fuerza brutal 💔. Me descubro contemplando tus fotos como si fueran ventanas a un mundo que aún no puedo tocar 📸🪟. Y en esas imágenes, te vuelvo a sentir cerca… como si tu voz pudiera acariciarme desde el eco del recuerdo 🔊👂.

Hay momentos en los que el alma se quiebra un poco más 🫥, cuando el silencio se vuelve más largo que de costumbre 🌑. Y me pregunto cómo se le explica al destino que no estás aquí… cómo se convence al corazón de que no puede tenerte cuando más te necesita, cuando más arde por ti 💢. Porque lo que despiertas en mí no se puede contener. Es deseo, es ternura, es locura, es amor… todo al mismo tiempo 💘🫶🔥.

Pero aquí estoy, dándome la oportunidad de dar lo mejor, con paciencia, con la certeza de que vale la pena ⏳💖. Porque mi destino —si tengo el privilegio de elegirlo— es estar contigo 🛤️👫. Porque quiero que seas mi vida, no solo una parte bonita del camino 🚶‍♂️🪷.

Y ahora, solo me queda agradecer… de forma rotunda, sincera, sin medida 🙏.

Gracias por cada segundo compartido, porque en medio de esta distancia, cada amanecer comienza contigo en mi mente 🌅, y cada noche termina extrañándote 🌌. Gracias porque, aunque aún no podamos vivirlo del todo, deseo compartir mi día a día contigo 📆. Con la esperanza de que esta compañía que nos une se vuelva algo tangible, inquebrantable, imperdible 🔗.

Gracias por encontrarme, por entrar en mi vida, por tocarla de la forma en que solo tú lo has hecho 💫. Y lo reitero con todo mi corazón: mi deseo es vivir una vida contigo 🧡. No un momento, no una historia pasajera… sino una vida entera, contigo a mi lado 🥂💍.

Y por sobre todo, te agradezco por permitirme estar a tu lado en esta primera etapa, por cada instante compartido 🕰️. Por tus sonrisas tímidas que me iluminan 😊✨, por tu dulzura que desarma 🍯, por tus miradas que me calman y me incendian a la vez 🔥🧊. Gracias por tu esencia, por tu ternura, por tu fuerza 💐. Gracias por permitirme habitar tu mundo, aunque sea a la distancia, incluso sin promesas, incluso con miedos 🌌🎈.

Deseo con todo lo que soy que me sigas permitiendo estar en tu vida... día tras día, noche tras noche 🌞🌙... y si la vida me da —o nos da— la oportunidad, ojalá también en la próxima 🌠. Porque si existe algo más allá de este tiempo, de esta piel, de esta historia… si el amor tiene algo de eterno, estoy seguro de que volvería a encontrarte ♾️💖.

Te quiero. Más de lo que estas palabras alcanzan a decir 🫀.
Y por sobre todo, te elijo y te seguiré eligiendo 💍🌹.

Con cariño, con verdad y con esperanza. 🌷
  `;

  useEffect(() => {
    if (iniciado) {
      let i = 0;
      const intervalo = setInterval(() => {
        setContenido((prev) => prev + textoCarta[i]);
        i++;
        if (i === textoCarta.length) clearInterval(intervalo);
      }, 65);
      return () => clearInterval(intervalo);
    }
  }, [iniciado]);

  useEffect(() => {
    if (scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [contenido]);

  const iniciarCarta = () => {
    setIniciado(true);
    audioRef.current.play().catch((error) => {
        console.log("Error al reproducir audio:", error);
      });
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-rose-100 via-pink-200 to-rose-300 p-6">
      {!iniciado ? (
        <div className="text-center">
          <h1 className="text-4xl font-romantic text-rose-700 mb-6 animate-fade-in">
            ¿Lista para algo especial? 💌
          </h1>
          <button
            onClick={iniciarCarta}
            className="cursor-heart animate-beat rotate-45 bg-rose-500 hover:bg-rose-600 text-white px-8 py-4 rounded-full text-xl shadow-lg transition-all duration-300"
          >
            Iniciar Carta
          </button>
        </div>
      ) : (
        <div className="w-full max-w-2xl h-[80vh] overflow-auto bg-white bg-opacity-80 rounded-3xl shadow-xl p-8 font-romantic text-2xl text-rose-800 leading-relaxed border border-rose-300 backdrop-blur-md scrollbar-none scroll-smooth" ref={scrollRef}>
          {contenido}
          <span className="animate-pulse text-rose-400">|</span>
          <audio ref={audioRef} src="/De-mi-para-ti.mp3" autoPlay />
          <audio ref={audioRef} src="/Base.mp3" autoPlay />
          
        </div>
      )}

      <img src={alrevez} className="absolute w-30 inset-0 flex self-end justify-self-start mb-10 ms-6 cursor-heart animate-beat rotate-225" alt="" />
      
    </div>
  );
};

export default Letter;
